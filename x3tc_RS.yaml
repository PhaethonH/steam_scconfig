# X3:TC configuration

name: "RightStick FpsLook"
revision: 672
author: "PhaethonH"
description: "Centered on Right Stick for Pitch+Yaw"
devtype: controller_ps3

aliases:
  # no-operation to fill spots in radial/touch menu.
  NoOp: "{overlay,peel,dummy}"
  # Flight
  ToggleCursorFlightMode: <Space>
  ToggleClassicFlightMode: <Left_Shift><N>
  PitchUp: <Down_Arrow>
  PitchDown: <Up_Arrow>
  YawLeft: <Left_Arrow>
  YawRight: <Right_Arrow>
  RollLeft: <Q>
  RollRight: <E>
  Accelerate: <X>
  Decelerate: <Z>
  BoostExtension: <Tab>
  BrakeToStop: <Backspace>
  BrakeAndReverse: (LB)
  MatchSpeedToTarget: <Left_Shift><F>
  LockThrottle: (LS)
  ToggleAutopilot: <Left_Shift><A>
  DockWithTarget: <Left_Shift><D>
  SwitchGravidarModes: <>
  EjectFromShip: <Left_Shift><E>
  StrafeLeft: <A>
  StrafeRight: <D>
  StrafeUp: <W>
  StrafeDown: <S>
  # Weapons
  BoresightFire: <Right_Control>
  CursorFire: "[3]"
  LaserTargetingMode: <K>
  SelectMissile: <M>
  LaunchMissile: <L>
  SelectWeaponGroup1: <1>
  SelectWeaponGroup2: <2>
  SelectWeaponGroup3: <3>
  SelectWeaponGroup4: <4>
  WeaponsMenu: <G>
  # Targeting
  TrackTarget: <T>
  TargetNearestEnemy: <Left_Shift><T>
  TargetNextObject: <Page_Up>
  TargetPrevObject: <Page_Down>
  TargetNextOwnedObject: <Insert>
  TargetPreviousOwnedObject: <Delete>
  TargetNextEnemy: <Home>
  TargetPreviousEnemy: <End>
  # Information
  ActionsForSelectedObject: <I>
  ViewInfoAboutSelectedObject: <U>
  CurrentShip: <Y>
  PersonalInformation: <P>
  Navigation: <Semicolon>
  SectorMap: <Period>
  GalaxyMap: <Comma>
  ShowSelectionOnGalaxyMap: <G>
  OwnedProperty: <R>
  MessageLog: <Left_Shift><M>
  MyMissions: <>
  GlobalCommands: <>
  Encyclopedia: <>
  MyAchievements: <>
  # Commands and Management
  CommandConsoleForCurrentShip: <Left_Shift><C>
  RenameObject: <M>
  WingmenAttackTarget: <Left_Shift><6>
  WingmenProtectMe: <Left_Shift><7>
  DronesAttackTarget: <Left_Shift><8>
  DronesProtectMe: <Left_Shift><9>
  # Ships and Stations
  Comms: <C>
  TradeWithStation: <D>
  BarterGoods: <>
  LandedShips: <L>
  OwnedShips: <O>
  ChangeShip: <X>
  # Freight
  FreightBay: <F>
  FreightExchange: <>
  # Upgrades
  SETATimeAccelerator: <J>
  SETA: $SETATimeAccelerator
  Jumpdrive: <Left_Shift><J>
  UnfocussedJump: <>
  VideoEnhancementGoggles: <Left_Alt>
  BestSellingPriceLocator: <5>
  BestBuysLocator: <6>
  # Interface/General
  OpenSidebar: <Return>
  OptionsMenu: <Left_Shift><O>
  Graphics: <>
  Audio: <>
  Gameplay: <>
  Controls: <>
  LoadSavedGame: <Left_Shift><L>
  SaveCurrentGame: <Left_Shift><S>
  PauseGame: <Pause>
  QuitGame: <Left_Shift><Q>
  # Views
  SelectViewMode: <F1>
  ExternalView: <F2>
  TargetViewZoomMonitor: <F3>
  ToggleHudDisplay: <Left_Shift><H>
  SelectMonitor: <F4>
  CloseMonitors: <F5>
  ViewOnLeftMonitor: <Left_Shift><1>
  ViewOnRightMonitor: <Left_Shift><2>
  ZoomIn: <KEYPAD_PLUS>
  ZoomOut: <KEYPAD_DASH>
  SelectCameraMode: <KEYPAD_0>
  DefaultView: <KEYPAD_5>
  ViewFromNorth: <KEYPAD_8>
  ViewFromNortheast: <KEYPAD_9>
  ViewFromEast: <KEYPAD_6>
  ViewFromSoutheast: <KEYPAD_3>
  ViewFromSouth: <KEYPAD_2>
  ViewFromSouthwest: <KEYPAD_1>
  ViewFromWest: <KEYPAD_4>
  ViewFromNorthwest: <KEYPAD_7>
  # Menus
  CancelEscape: <Escape>
  SelectOption: <Return>
  MenuCursorUp: <Up_Arrow>
  MenuCursorDown: <Down_Arrow>
  MenuCursorLeft: <Left_Arrow>
  MenuCursorRight: <Right_Arrow>
  ScrollUp: "[u]"
  ScrollDown: "[d]"
  ScrollPageUp: <Page_Up>
  ScrollPageDown: <Page_Down>
  EmptySelection: <Home>
  FillSelection: <End>
  CloseAllMenus: <Delete>
  # Editing
  DeleteCharacter: <Delete>
  Backspace: <Backspace>
  Home: <Home>
  End: <End>
  # Archival
  TakeScreenshot: <F9>
  # Sector Map
  MoveMapCursorLeft: <KEYPAD_4>
  MoveMapCursorRight: <KEYPAD_6>
  MoveMapCursorUp: <KEYPAD_8>
  MoveMapCursorDown: <KEYPAD_2>
  MoveMapCursorUpAndLeft: <KEYPAD_7>
  MoveMapCursorUpAndRight: <KEYPAD_9>
  MoveMapCursorDownAndLeft: <KEYPAD_1>
  MoveMapCursorDownAndRight: <KEYPAD_3>
  MoveMapCursorToNearestObject: <KEYPAD_5>
  ChangeMapAxis: <Insert>
  EnableDisableSectorCamera: <K>
  ZoomMapIn: <Home>
  ZoomMapOut: <End>
  BuildStationRotateAAxisPos: <KEYPAD_3>
  BuildStationRotateAAxisNeg: <KEYPAD_1>
  BuildStationRotateBAxisPos: <KEYPAD_9>
  BuildStationRotateBAxisNeg: <KEYPAD_7>

  Accel_UiUp: <Up_Arrow>
  Decel_UiDn: <Down_Arrow>
  Boost_UiPrio: <Page_Up>
  Brake_UiNext: <Page_Down>
  TgtPrevObj_UiLt: <Left_Arrow>
  TgtNextObj_UiRt: <Right_Arrow>
  TgtPrevOwn_TradeDec: <Backspace>
  TgtNextOwn_TradeInc: <1>

  UiUp_TgtNearBandit: <Up_Arrow>#Ui↑#@Bandit
  UiDn_TgtNextEnemy: <Down_Arrow>#Ui↓#@Enemy+
  UiLt_TgtNextOwn: <Left_Arrow>#Ui←#@Own+
  UiRt_TgtNextAny: <Right_Arrow>#Ui→#@Any+

  TradePad: "{overlay,apply,Trade1}"
  EndTradePad: "{overlay,peel,Trade1}{overlay,peel,T1_1}{overlay,peel,T1_2}{overlay,peel,T1_3}{overlay,peel,T1_4}{overlay,peel,T1_5}{overlay,peel,T1_6}{overlay,peel,T1_7}{overlay,peel,T1_8}{overlay,peel,T1_9}"

Hats:
  - &MenuHat
    u: <Up_Arrow>
    l: <Left_Arrow>
    r: <Right_Arrow>
    d: <Down_Arrow>
  - &MenuHat2
    u: <Page_Up>
    d: <Page_Down>
    l: $SelectCameraMode
    r: $ChangeMapAxis
  - &SixthAxis
    u: $Accelerate
    d: $Decelerate
    l: $RollLeft
    r: $RollRight
    .layout: analog
    .period: 60
    .duty: 20
  - &WingmateHat
    u: $WingmenAttackTarget
    d: $WingmenProtectMe
    l: $DronesProtectMe
    r: $DronesAttackTarget
  - &ArsenalHat
    u: $SelectWeaponGroup1 :$SelectWeaponGroup2
    d: $SelectWeaponGroup3 :$SelectWeaponGroup4
    l: $MatchSpeedToTarget
    r:  _$WeaponsMenu
    .layout: four-way
  - &TargetingHat
    style: dpad
    u: $TargetNearestEnemy
    l: $TargetNextOwnedObject
    r: $TargetNextObject
    d: $TargetNextEnemy
    .layout: four-way
  - &BogeyHat
    u: $ActionsForSelectedObject _$ViewInfoAboutSelectedObject
    l: $SETA _$Jumpdrive  :${ToggleAutopilot}#SETA+Autopilot :${SETA}@200,0
    r: $Comms :$CommandConsoleForCurrentShip
    d: $DockWithTarget :$CommandConsoleForCurrentShip
  - &FriendlyHat
    u: $ActionsForSelectedObject _$ViewInfoAboutSelectedObject
    l: $LandedShips :$OwnedProperty _$Jumpdrive
    r: $FreightBay
    d: $CurrentShip :$PersonalInformation _$ChangeShip
  - &MapCursor
    style: radial
    "c": <KEYPAD_5>
    "00": "${NoOp}#ZoomOut___ZoomIn#LB###########################RB"
    "01": <KEYPAD_8>
    "02": <KEYPAD_9>
    "03": <KEYPAD_6>
    "04": <KEYPAD_3>
    "05": <KEYPAD_2>
    "06": <KEYPAD_1>
    "07": <KEYPAD_4>
    "08": <KEYPAD_7>
    .activate: always
    .x: 7
    .y: 77
    .scale: 100


action:
- name: Default
  layer:
  - name: Default
    LJ:
      style: jsmove
      c: "{overlay,apply,6th_axis}"
#    # Displays1 as modeshift
#    LJ&X:
#      <<: *MapCursor
#      .opacity: 40
    RJ:
      style: jsmove
      # Double-tap+hold for missile spam; Hold 3s to cancel missile launch.
      c: $LaunchMissile :${LaunchMissile}/20#Missile#spam _<>:3000#Cancel#Launch
#    BK: <2><1>|#Cycle#Weapons#Group _<4><3>|
#    BK: :<2> _<1> <4>
    BK: $SelectMissile _$SETA
    # LT for speed settings:
    # Lv0: tap = PresetHi/Lo, hold = Boost/Brake
    # Lv1 LB+: MatchSpeed / Reverse
    # Lv2 RB+: ThrottleScale
    # Lv3 LB+RB+: Reverse
    LT:
      style: trigger
      o: $BrakeToStop +${Accelerate}@50,250#SpeedPresetLo
      c: $BoostExtension +${Decelerate}@50,250#SpeedPresetHi
      settings:
        deadzone_inner_radius: 0
        deadzone_outer_radius: 32767
        adaptive_threshold: 5
        edge_binding_radius: 0
    RT.c: $BoresightFire
#    BQ.n: $OpenSidebar
    BQ.n: +${TradePad} -${EndTradePad}
    BQ.w: $SectorMap :$GalaxyMap _{overlay,hold,Displays1}:333#Displays
    BQ.e: $CancelEscape
    BQ.s: $SelectOption
    DP: *MenuHat
    # Displays1 as modeshift
    DP&X: *MenuHat2
    LB: "&${ZoomOut}:12"
    RB: "&${ZoomIn}:12"
    ST: <Delete>{overlay,peel,Displays1}

  - name: dummy

  - name: 6th_axis
    LJ:
      style: dpad
      c: "{overlay,peel,6th_axis}"
      <<: *SixthAxis

# Operations that are reasonable to use without flight stick control:
#*Current Ship (panel)
#*Personal Info (panel)
#*Owned Property (panel)
#*Message Log
#*Rename object
#* TradeWithStation
#* LandedShips
#* OwnedShips
#* ChangeShip
#* BestSell
#* BestBuy
#*UnfocusedJump
# Operations that may be used without flight stick control (but would be nice):
#*Autopilot
#*Comms
#* DockingComputer
#* SETA
#* Jumpdrive
#
#*MyMissions
#*Encyclopedia
#*MyAchievemens

# Right Hand Panels: NAV, AP, WYPT, SHIP STATUS, Cockpit
## n: 
## w: 
## e: (eject?)
## s: ShipPanel _PlayerPanel
# Left Hand Panels: Comms, Manual Reversion, Landing, FFI
## n: TargetActions :TargetInfo
## w: SETA _Jumpdrive
## e: Freight
## s: Comms

# RH: Target Ops Friendly
# LH: Target Ops Bogey
## n: TargetActions :TargetInfo
## w: 
## e: CommandConsole
## s:  _ChangeShip


  - name: Panels1
    # D-pad reflects A-10C throttle's Coolie Hat.
    # UP=HUD-as-SOI; DOWN=SwapMFCD/QuickLookDSMS
    # LEFT=CycleLeftMFCD/LeftMFCD-as-SOI RIGHT=CycleRightMFCD/RightMFCD-as-SOI
    DP.u: "{mouse_position,16384,16384,0} [1]@120,0   _$ToggleHudDisplay"
    DP.d: $SelectMonitor  _$CloseMonitors
    # Short Press to select monitor; Long Press to show on monitor.
    DP.l: "[1]^@150,0 _$ViewOnLeftMonitor:250 {mouse_position,4000,2000,1}^@0,200 "
    DP.r: "[1]^@150,0 _$ViewOnRightMonitor:250 {mouse_position,30000,2000,1}^@0,200 "
    # ButtonQuad bindings should be sensible to use while not piloting.
    BQ: *BogeyHat
    # LeftJoystick reflects Slew Control.
    LJ:
      style: jsmouse
      c: "[1]"
      settings:
        sensitivity: 63

  - name: Panels2
    # Hold left/right to peel off Panels2 and drop to Long Press.
    DP.l: "{overlay,peel,Panels2}^/250 -{mouse_position,4000,2000,1}@0,200 -[1]@150,0 -{overlay,peel,Panels2}@200,0"
    DP.r: "{overlay,peel,Panels2}^/250 -{mouse_position,30000,2000,1}@0,200 -[1]@150,0 -{overlay,peel,Panels2}@200,0"


  - name: Displays1
    BQ: { style: face }
    DP: { style: dpad}
    LJ: { style: jsmove }
    RJ: { style: jsmove }
#    LB: "&${ZoomOut}:12"
#    RB: "&${ZoomIn}:12"
    LB: $ZoomOut :$ZoomMapOut
    RB: $ZoomIn :$ZoomMapIn
    DP: *MenuHat2
    LJ&X:
      <<: *MapCursor
      opacity: 80
#    LT&X:
#      "style": trigger
#      o: "+{overlay,apply,SpeedScale}"
#      settings:
#        output_trigger: 0
#        edge_binding_radius: 0
#        deadzone_outer_radius: 32767
    ST: "{overlay,peel,Displays1}"

  - name: Combat1
    # Weapon Hat
    DP: *ArsenalHat
    # Targeting Hat
    LJ: *TargetingHat
    # ?
    BQ: *FriendlyHat
# click = ToggleAutoPilot, long = LaserTargetingMode, double = ToggleAutopilot + SETATimeAccelerator
    BK: $ToggleAutopilot _$LaserTargetingMode  :${ToggleAutopilot}:250#SETA+Autopilot :${SETATimeAccelerator}:250@400,0

  - name: Command1
    # Wingmen Hat
    DP: *WingmateHat
    # LT: deceleration
    LT:
      style: trigger
      c: <>
      o: $Decelerate
      settings:
        adaptive_threshold: 0
    # Misc Hat
    BQ:
      style: face
      n: $EjectFromShip
      e: $CommandConsoleForCurrentShip
      w: $OwnedProperty
      s: <>

  - name: SpeedMatch
    #
    LT.o: $MatchSpeedToTarget _$Decelerate
    LT.c: $MatchSpeedToTarget _$Decelerate

  - name: SpeedScale
    LT:
      "style": trigger
      c: +{overlay,apply,SpeedLock}
      o: +{overlay,apply,SpeedLock}
      settings:
        adaptive_threshold: 0
        output_trigger: 1
        deadzone_inner_radius: 0
        deadzone_outer_radius: 32767
        edge_binding_radius: 0

  # Throttle engaged, start monitoring.
  - name: SpeedLock
    RB: "-(LS){overlay,apply,SpeedLimbo}"
    LT:
      style: trigger
      c: <>
      o: "-{overlay,apply,SpeedLock0}"
      settings:
        adaptive_threshold: 0
        output_trigger: 1
        deadzone_inner_radius: 0
        deadzone_outer_radius: 32767
        edge_binding_radius: 0

  # Throttle returned to center while monitored.
  - name: SpeedLock0
    # Manually revert shifting.
    RB: "-(LS){overlay,peel,SpeedLock0}{overlay,peel,SpeedLock}{overlay,peel,Shift_2}{overlay,peel,Combat1}{overlay,peel,SpeedScale}"
    LT:
      style: trigger
      # Re-engaging throttle.
      c: "+{overlay,peel,SpeedLock0}"
      o: "+{overlay,peel,SpeedLock0}"
      settings:
        adaptive_threshold: 0
        output_trigger: 1
        deadzone_inner_radius: 0
        deadzone_outer_radius: 32767
        edge_binding_radius: 0

  # Throttle set, wait for return to center.
  - name: SpeedLimbo
    LT:
      style: trigger
#      c: -{overlay,peel,SpeedScale}{overlay,peel,SpeedLock}{overlay,peel,SpeedLimbo}
      # Manually revert shifting.
      o: -{overlay,peel,SpeedLock}{overlay,peel,SpeedLock0}{overlay,peel,SpeedLimbo}{overlay,peel,Shift_2}{overlay,peel,Combat1}{overlay,peel,SpeedScale}
      settings:
        adaptive_threshold: 0
        output_trigger: 1
        deadzone_inner_radius: 0
        deadzone_outer_radius: 32767
        edge_binding_radius: 0


#  - name: SpeedScale
#    LT:
#      style: trigger
#      c: +{overlay,apply,SpeedLimbo}
#      o: +{overlay,apply,SpeedLimbo}
#      settings:
#        adaptive_threshold: 0
#        output_trigger: 1
#        deadzone_inner_radius: 0
#        deadzone_outer_radius: 32767
#        edge_binding_radius: 0
#
#  - name: SpeedLimbo
#    LT:
#      style: trigger
##      c: -{overlay,peel,SpeedScale}{overlay,peel,SpeedLock}{overlay,peel,SpeedLimbo}
#      c: -{overlay,peel,SpeedLimbo}
#      o: -{overlay,peel,SpeedLimbo}
#      settings:
#        adaptive_threshold: 0
#        output_trigger: 1
#        deadzone_inner_radius: 0
#        deadzone_outer_radius: 32767
#        edge_binding_radius: 0


  # WeaponsMode, Laser
  - name: WM_Laser
    BK: $LaserTargetingMode
  # WeaponsMode, Missile
  - name: WM_Missile
    BK: $SelectMissile

  - name: Trade1
    # Hold Square to modify trade quanitites.
    DP.l: "<Backspace>{overlay,peel,T1_1}{overlay,peel,T1_2}{overlay,peel,T1_3}{overlay,peel,T1_4}{overlay,peel,T1_5}{overlay,peel,T1_6}{overlay,peel,T1_7}{overlay,peel,T1_8}{overlay,peel,T1_9}"
    DP.u: "+<Backspace> +<1>@50,0 -{overlay,apply,T1_1}"
    DP.r: "<0>{overlay,peel,T1_1}{overlay,peel,T1_2}{overlay,peel,T1_3}{overlay,peel,T1_4}{overlay,peel,T1_5}{overlay,peel,T1_6}{overlay,peel,T1_7}{overlay,peel,T1_8}{overlay,peel,T1_9}"
    DP.d: "+<Backspace> +<9>@50,0 -{overlay,apply,T1_9}"
    BQ.n: -$EndTradePad $TradeWithStation _<>:250
    LB: $BestBuysLocator
    RB: $BestSellingPriceLocator
    ST: $EndTradePad
    LJ:
      style: jsmove
    LJ&Y:
      style: radial
      "00": "${NoOp}#BestBuy____BestSell#LB############################RB"
      "01": $TradeWithStation
      "02": $ChangeShip
      "03": $LandedShips
      "04": $OwnedShips
    BK: $FreightBay

  - name: T1_1
    DP.u: "+<Backspace> +<2>@50,0 -{overlay,peel,T1_1}{overlay,apply,T1_2}"
    DP.d: "+<Backspace> +<0>@50,0 -{overlay,peel,T1_1}{overlay,apply,Trade1}"
  - name: T1_2
    DP.u: "+<Backspace> +<3>@50,0 -{overlay,peel,T1_2}{overlay,apply,T1_3}"
    DP.d: "+<Backspace> +<1>@50,0 -{overlay,peel,T1_2}{overlay,apply,T1_1}"
  - name: T1_3
    DP.u: "+<Backspace> +<4>@50,0 -{overlay,peel,T1_3}{overlay,apply,T1_4}"
    DP.d: "+<Backspace> +<2>@50,0 -{overlay,peel,T1_3}{overlay,apply,T1_2}"
  - name: T1_4
    DP.u: "+<Backspace> +<5>@50,0 -{overlay,peel,T1_4}{overlay,apply,T1_5}"
    DP.d: "+<Backspace> +<3>@50,0 -{overlay,peel,T1_4}{overlay,apply,T1_3}"
  - name: T1_5
    DP.u: "+<Backspace> +<6>@50,0 -{overlay,peel,T1_5}{overlay,apply,T1_6}"
    DP.d: "+<Backspace> +<4>@50,0 -{overlay,peel,T1_5}{overlay,apply,T1_4}"
  - name: T1_6
    DP.u: "+<Backspace> +<7>@50,0 -{overlay,peel,T1_6}{overlay,apply,T1_7}"
    DP.d: "+<Backspace> +<5>@50,0 -{overlay,peel,T1_6}{overlay,apply,T1_5}"
  - name: T1_7
    DP.u: "+<Backspace> +<8>@50,0 -{overlay,peel,T1_7}{overlay,apply,T1_8}"
    DP.d: "+<Backspace> +<6>@50,0 -{overlay,peel,T1_7}{overlay,apply,T1_6}"
  - name: T1_8
    DP.u: "+<Backspace> +<9>@50,0 -{overlay,peel,T1_8}{overlay,apply,T1_9}"
    DP.d: "+<Backspace> +<7>@50,0 -{overlay,peel,T1_8}{overlay,apply,T1_7}"
  - name: T1_9
    DP.u: "+<Backspace> +<0>@50,0 -{overlay,peel,T1_9}{overlay,apply,Trade1}"
    DP.d: "+<Backspace> +<8>@50,0 -{overlay,peel,T1_9}{overlay,apply,T1_8}"

  shiftmap:
    shifter:
      LB: hold 1
      RB: hold 2
    overlay:
      1: [ SpeedMatch, Panels1, Panels2 ]
      2: [ SpeedScale, Combat1 ]
      3: [ Command1 ]
    sanity: ST
    hermit:
      1: -<T>
#    extend:
#      2: -(LS)

